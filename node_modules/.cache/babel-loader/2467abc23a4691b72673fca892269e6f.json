{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { getUserToken } from \"./index\";\nimport fetchResource from \"../index\";\n\nconst useAuth = () => {\n  _s();\n\n  const [isSessionValid, setIsSessionValid] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const token = getUserToken();\n  useEffect(() => {\n    if (token) {\n      setLoading(true);\n      fetchResource(\"GET\", \"user\").then(userData => {\n        setIsSessionValid(true);\n        setTimeout(() => setLoading(false), 1000);\n      }).catch(error => {\n        setLoading(false);\n        setIsSessionValid(false);\n      });\n    } else {\n      setLoading(false);\n    }\n  }, [token]);\n  return {\n    loading,\n    authenticated: token && isSessionValid\n  };\n};\n\n_s(useAuth, \"ddwm0nbUC3XC0ivNzvj+q8hrXyo=\");\n\nexport default useAuth;","map":{"version":3,"names":["useEffect","useState","getUserToken","fetchResource","useAuth","isSessionValid","setIsSessionValid","loading","setLoading","token","then","userData","setTimeout","catch","error","authenticated"],"sources":["/Users/maryliz/repoMary/docefit/frontend/src/api/auth/useAuth.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {getUserToken} from \"./index\";\nimport fetchResource from \"../index\";\n\n\nconst useAuth = () => {\n    const [isSessionValid, setIsSessionValid] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const token = getUserToken();\n\n    useEffect(()=> {\n        if(token){\n            setLoading(true);\n            fetchResource(\"GET\", \"user\")\n                .then(userData => {\n                    setIsSessionValid(true);\n                    setTimeout(() => setLoading(false), 1000)\n\n                }).catch(error => {\n                setLoading(false);\n                setIsSessionValid(false);\n            })\n        }else{\n            setLoading(false);\n        }\n\n    }, [token])\n\n    return {\n        loading,\n        authenticated: token && isSessionValid\n    }\n\n}\n\nexport default useAuth;"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,QAAnB,QAAkC,OAAlC;AACA,SAAQC,YAAR,QAA2B,SAA3B;AACA,OAAOC,aAAP,MAA0B,UAA1B;;AAGA,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAClB,MAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCL,QAAQ,CAAC,KAAD,CAApD;EACA,MAAM,CAACM,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,IAAD,CAAtC;EACA,MAAMQ,KAAK,GAAGP,YAAY,EAA1B;EAEAF,SAAS,CAAC,MAAK;IACX,IAAGS,KAAH,EAAS;MACLD,UAAU,CAAC,IAAD,CAAV;MACAL,aAAa,CAAC,KAAD,EAAQ,MAAR,CAAb,CACKO,IADL,CACUC,QAAQ,IAAI;QACdL,iBAAiB,CAAC,IAAD,CAAjB;QACAM,UAAU,CAAC,MAAMJ,UAAU,CAAC,KAAD,CAAjB,EAA0B,IAA1B,CAAV;MAEH,CALL,EAKOK,KALP,CAKaC,KAAK,IAAI;QAClBN,UAAU,CAAC,KAAD,CAAV;QACAF,iBAAiB,CAAC,KAAD,CAAjB;MACH,CARD;IASH,CAXD,MAWK;MACDE,UAAU,CAAC,KAAD,CAAV;IACH;EAEJ,CAhBQ,EAgBN,CAACC,KAAD,CAhBM,CAAT;EAkBA,OAAO;IACHF,OADG;IAEHQ,aAAa,EAAEN,KAAK,IAAIJ;EAFrB,CAAP;AAKH,CA5BD;;GAAMD,O;;AA8BN,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}